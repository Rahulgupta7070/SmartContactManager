<!doctype html>
<html lang="en" xmlns:th ="http://www.thymeleaf.org" th:replace="normal/base::layout(~{::section})" >
<head>
	<meta charset="UTF-8" />
	<title>Home page</title>
	<link rel="stylesheet" th:href="@{/css/style.css}" />
	 <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

	  </head>
<body>
<section>
  <div class="container">
   
      <div class="card">
          <div class="card-body">
          
          <div class="container text-center">
          
          <img src=""
                     style="height: 200px; width: 200px;"
                     class="my_proofile_pecture"
                     th:src="@{'/Image/' + ${user.imageUrl}}"
                     alt="profile photo" />
          
          </div>
          
       <h2 class="text-center">Hey, <span th:text="${user.name}">User</span> ðŸ‘‹</h2>
          
           <table class="table text-center">
                    <thead>
                        <tr>
                            <th scope="col">#USERID</th>
                            <th scope="col">
                                SCMUSER <span th:text="${user.id}"></span>
                            </th>
                        </tr>
                    </thead>
                    
                    <tbody>
                       
                        <tr>
                            <th scope="row">Email</th>
                            <td><span th:text="${user.email}"></span></td>
                        </tr>
                        <tr>
                            <th scope="row">Role</th>
                            <td><span th:text="${user.role}"></span></td>
                        </tr>
                        <tr>
                            <th scope="row">Account active</th>
                            <td><span th:text="${user.enabled}"></span></td>
                        </tr>
   
                        <tr>
                            <th scope="row">About</th>
                            <td><span th:text="${user.about}"></span></td>
                        </tr>
                         
                         
                         
                         
                    </tbody>
                </table>
                
           <div class="row g-3 mb-3 justify-content-center">
               <div class="col-md-3">
               <div class="card shadow-sm p-2 text-center">
               <h6>Total Contacts</h6>
               <p class="fs-3 fw-bold text-primary" th:text="${totalContacts}">0</p>
              
           </div>
       <!-- Row for Upload / Change Photo and About Edit -->
<div class="d-flex flex-wrap align-items-center gap-3 mt-3">

  <!-- Upload / Change Photo -->
<form th:action="@{/user/update-profile}" method="post" enctype="multipart/form-data" class="d-flex align-items-center gap-2">
    <input type="file" name="profileImage" accept="image/*" class="form-control form-control-sm" />
    <button type="submit" class="btn btn-success btn-sm">Change Pic</button>
</form>
  <!-- About section -->
  <div class="d-flex align-items-center gap-2">
    <!-- Display about text -->
   
    <i class="bi bi-pencil-square" style="cursor:pointer;" onclick="showAboutEdit()"></i>

    <!-- Edit form (initially hidden) -->
    <form id="about-form" th:action="@{/user/update-profile}" method="post" style="display:none;" class="d-flex align-items-center gap-2">
      <input type="text" name="about" id="about-input" th:value="${user.about}" required class="form-control form-control-sm" />
      <button type="submit" class="btn btn-primary btn-sm">Save</button>
      <button type="button" class="btn btn-secondary btn-sm" onclick="cancelAboutEdit()">Cancel</button>
    </form>
  </div>

</div>

</div>

    </div>
          
          
          </div>
     </div>
   
   </div> 
     <script>
    $(document).ready(()=>{
    
    $(".item").removeClass("active");
    $("#profile-link").addClass("active");
    
    });
   
   
   </script>
  
      
</section>


<script>
function showAboutEdit() {
  document.getElementById("about-text").style.display = "none";
  document.getElementById("about-form").style.display = "inline-block";
}
function cancelAboutEdit() {
  document.getElementById("about-text").style.display = "inline";
  document.getElementById("about-form").style.display = "none";
}
</script>
	
</body>
</html>